{
  "variables": [],
  "info": {
    "name": "Space to Imgur",
    "_postman_id": "db84bc44-e279-688f-6c21-820e3941040c",
    "description": "",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "_postman_id": "a3bed22b-d5bf-5364-c0de-04ab71f4d67b",
      "name": "Astronomy Picture of the Day",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "",
              "if (responseCode.code === 200) {",
              "    ",
              "    try {",
              "        var result = JSON.parse(responseBody);",
              "        var title = result.title;",
              "        var explanation = result.explanation;",
              "        var url = result.hdurl;",
              "    }",
              "    ",
              "    catch(e) {",
              "        console.log(e);",
              "    }",
              "    ",
              "    postman.setEnvironmentVariable(\"spaceTitle\", title);",
              "    postman.setEnvironmentVariable(\"spaceExplanation\", explanation);",
              "    postman.setEnvironmentVariable(\"spaceUrl\", url);",
              "",
              "}",
              "",
              "postman.setNextRequest(\"Upload image to Imgur via OAUTH\");",
              ""
            ]
          }
        }
      ],
      "request": {
        "url": "https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY&hd=True",
        "method": "GET",
        "header": [],
        "body": {},
        "description": "1) GET request for Astronomy Picture of the Day from NASA\n2) POST request to upload image to Imgur"
      },
      "response": []
    },
    {
      "_postman_id": "64e36a2b-cea3-7d41-439b-0e9a8988f0f8",
      "name": "Upload image to Imgur ANON",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "tests[\"Status code is 200\"] = responseCode.code === 200;"
            ]
          }
        }
      ],
      "request": {
        "url": "https://api.imgur.com/3/upload",
        "method": "POST",
        "header": [
          {
            "key": "Authorization",
            "value": "Client-ID 9cbdb08dc9da19f",
            "description": ""
          }
        ],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "image",
              "value": "{{spaceUrl}}",
              "type": "text",
              "enabled": true
            },
            {
              "key": "title",
              "value": "{{spaceTitle}}",
              "type": "text",
              "enabled": true
            },
            {
              "key": "description",
              "value": "{{spaceExplanation}}",
              "type": "text",
              "enabled": true
            }
          ]
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "7af771d1-4806-6cbe-aca9-468ae581d03d",
      "name": "Upload image to Imgur via OAUTH",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "",
              "if (responseCode.code === 200) {",
              "    ",
              "    try {",
              "        var result = JSON.parse(responseBody);",
              "        var id = result.data.id;",
              "    }",
              "    ",
              "    catch(e) {",
              "        console.log(e);",
              "    }",
              "    ",
              "    postman.setEnvironmentVariable(\"imgurId\", id);",
              "    ",
              "}"
            ]
          }
        }
      ],
      "request": {
        "url": "https://api.imgur.com/3/upload",
        "method": "POST",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{accessToken}}",
            "description": ""
          }
        ],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "image",
              "value": "{{spaceUrl}}",
              "type": "text",
              "enabled": true
            },
            {
              "key": "title",
              "value": "{{spaceTitle}}",
              "type": "text",
              "enabled": true
            },
            {
              "key": "description",
              "value": "{{spaceExplanation}}",
              "type": "text",
              "enabled": true
            }
          ]
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "cfa12e22-05e6-3400-e254-e2f5014b561c",
      "name": "Share image with Imgur community",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              ""
            ]
          }
        }
      ],
      "request": {
        "url": "https://api.imgur.com/3/gallery/image/{{imgurId}}",
        "method": "POST",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{accessToken}}",
            "description": ""
          }
        ],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "title",
              "value": "{{spaceTitle}}",
              "type": "text",
              "enabled": true
            }
          ]
        },
        "description": ""
      },
      "response": []
    }
  ]
}